# .env.example - Complete Phase 2 Configuration
# ============================================
# Copy this file to .env and update with your values

# ====================
# Server Configuration
# ====================
GRPC_PORT=50051
HTTP_PORT=8080
ENVIRONMENT=development
BASE_URL=http://localhost:3000
APP_NAME=TaskMaster
AUTO_MIGRATE=true
ENABLE_REFLECTION=true      # Disable in production
ENABLE_DEBUG_LOGS=true      # Disable in production

# ====================
# Database Configuration
# ====================
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=postgres
DB_NAME=taskmaster
DB_SSL_MODE=disable         # Use 'require' in production

# ====================
# Redis Configuration (for future caching)
# ====================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# ====================
# JWT Configuration
# ====================
JWT_ACCESS_SECRET=your-access-secret-key-change-this-in-production
JWT_REFRESH_SECRET=your-refresh-secret-key-change-this-in-production
JWT_ACCESS_TOKEN_DURATION=15m           # Access token lifetime (e.g., 15m, 1h, 24h)
JWT_REFRESH_TOKEN_DURATION=7d           # Refresh token lifetime (e.g., 7d, 30d)

# ====================
# Email Configuration - Phase 2
# ====================
# SMTP Settings
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-app-password         # Use app-specific password for Gmail
SMTP_TLS=true                           # Enable TLS for production

# Email From Settings
EMAIL_FROM=noreply@taskmaster.com
EMAIL_FROM_NAME=TaskMaster
SUPPORT_EMAIL=support@taskmaster.com

# Email Token Settings
EMAIL_VERIFICATION_TOKEN_DURATION=24h   # How long verification tokens are valid
PASSWORD_RESET_TOKEN_DURATION=1h        # How long password reset tokens are valid
EMAIL_RATE_LIMIT_PER_HOUR=5            # Max emails per hour per user
EMAIL_TESTING_MODE=false                # Set to true to use mock email service

# ====================
# Security Settings - Phase 2
# ====================
# Login Security
MAX_LOGIN_ATTEMPTS=5                    # Failed attempts before account lockout
ACCOUNT_LOCKOUT_DURATION=15m           # How long to lock account (e.g., 15m, 30m, 1h)

# Email Verification
MAX_EMAIL_VERIFICATION_ATTEMPTS=5       # Max verification attempts
REQUIRE_EMAIL_VERIFICATION=false        # Require email verification for new users

# Password Reset
MAX_PASSWORD_RESET_ATTEMPTS=5           # Max reset attempts per day
PASSWORD_RESET_RATE_LIMIT=15m          # Minimum time between reset requests

# Session Management
SESSION_TIMEOUT_DURATION=720h           # Session timeout (30 days = 720h)

# Notifications
ENABLE_SECURITY_NOTIFICATIONS=true      # Send security alerts via email

# ====================
# Validation Settings - Phase 2
# ====================
# Password Requirements
MIN_PASSWORD_LENGTH=8
REQUIRE_PASSWORD_UPPER=true             # Require uppercase letter
REQUIRE_PASSWORD_LOWER=true             # Require lowercase letter
REQUIRE_PASSWORD_NUMBER=true            # Require number
REQUIRE_PASSWORD_SPECIAL=false          # Require special character

# Username Requirements
MIN_USERNAME_LENGTH=3
MAX_USERNAME_LENGTH=50

# Field Length Limits
MAX_EMAIL_LENGTH=255
MAX_NAME_LENGTH=100
MAX_DESCRIPTION_LENGTH=5000
MAX_TITLE_LENGTH=200

# ====================
# Observability (Future)
# ====================
JAEGER_ENDPOINT=http://localhost:14268/api/traces
METRICS_PORT=9090
LOG_LEVEL=debug                         # debug, info, warn, error

# ====================
# Production Security Settings
# ====================
# Uncomment these for production deployment:

# ENVIRONMENT=production
# DB_SSL_MODE=require
# ENABLE_REFLECTION=false
# ENABLE_DEBUG_LOGS=false
# LOG_LEVEL=info
# SECURE_COOKIES=true
# CSRF_PROTECTION=true
# REQUIRE_EMAIL_VERIFICATION=true
# EMAIL_TESTING_MODE=false

# ====================
# Security Best Practices
# ====================
# For production, ensure you:
# 1. Change all default passwords and secrets
# 2. Use strong, unique JWT secrets (min 32 characters)
# 3. Enable database SSL (DB_SSL_MODE=require)
# 4. Disable reflection and debug logs
# 5. Configure proper SMTP credentials
# 6. Set appropriate rate limits and timeouts
# 7. Enable email verification for new users
# 8. Use HTTPS/TLS for all connections

# ====================
# Example Configurations
# ====================

# Strict Security (Production):
# MAX_LOGIN_ATTEMPTS=3
# ACCOUNT_LOCKOUT_DURATION=30m
# PASSWORD_RESET_RATE_LIMIT=30m
# REQUIRE_EMAIL_VERIFICATION=true
# MIN_PASSWORD_LENGTH=12
# REQUIRE_PASSWORD_SPECIAL=true

# Moderate Security (Staging):
# MAX_LOGIN_ATTEMPTS=5
# ACCOUNT_LOCKOUT_DURATION=15m
# PASSWORD_RESET_RATE_LIMIT=15m
# REQUIRE_EMAIL_VERIFICATION=false
# MIN_PASSWORD_LENGTH=10

# Relaxed Security (Development):
# MAX_LOGIN_ATTEMPTS=10
# ACCOUNT_LOCKOUT_DURATION=5m
# PASSWORD_RESET_RATE_LIMIT=5m
# REQUIRE_EMAIL_VERIFICATION=false
# MIN_PASSWORD_LENGTH=8